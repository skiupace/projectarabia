/**
 * For more details on how to configure Wrangler, refer to:
 * https://developers.cloudflare.com/workers/wrangler/configuration/
 */
{
  "$schema": "node_modules/wrangler/config-schema.json",
  "name": "projectarabia",
  "compatibility_date": "2025-09-02",
  "keep_vars": true,
  "compatibility_flags": [
    "nodejs_compat"
  ],
  "main": "worker/index.ts",
  "observability": {
    "enabled": true
  },
  "routes": [
    {
      "pattern": "b11z.news",
      "custom_domain": true
    },
    {
      "pattern": "b11z.news/*",
      "zone_id": "95646d20d7675139119e47fe4e619b7c"
    }
  ],
  "env": {
    "production": {
      "vars": {
        "DOMAIN": "b11z.news",
        "CLOUDFLARE_DATABASE_ID": "b069ff1d-7a47-462e-b1e6-0164062d0748",
        "CLOUDFLARE_ENV": "production",
        "VITE_SITE_KEY": "0x4AAAAAAB9fcOZ50et9DCar"
      },
      "d1_databases": [
        {
          "binding": "arabia",
          "database_name": "arabia",
          "database_id": "b069ff1d-7a47-462e-b1e6-0164062d0748"
        }
      ],
      "kv_namespaces": [
        {
          "binding": "ARABIAN_KV",
          "id": "2dbc45eb4b0248a1a804a97d19b9f7c9"
        }
      ],
      "queues": {
        "producers": [
          {
            "queue": "mailer",
            "binding": "MAILER"
          }
        ],
        "consumers": [
          {
            "queue": "mailer",
            "max_batch_size": 100, // 100 messages per batch
            "max_batch_timeout": 5 // 5 seconds per batch
          }
        ]
      }
    },
    "development": {
      "vars": {
        "DOMAIN": "localhost:3000",
        "CLOUDFLARE_DATABASE_ID": "b069ff1d-7a47-462e-b1e6-0164062d0748",
        "CLOUDFLARE_ENV": "development",
        "VITE_SITE_KEY": "0x4AAAAAAB9fcOZ50et9DCar"
      },
      "d1_databases": [
        {
          "binding": "arabia",
          "database_name": "arabia",
          "database_id": "b069ff1d-7a47-462e-b1e6-0164062d0748"
        }
      ],
      "kv_namespaces": [
        {
          "binding": "ARABIAN_KV",
          "id": "2dbc45eb4b0248a1a804a97d19b9f7c9"
        }
      ],
      "queues": {
        "producers": [
          {
            "queue": "mailer",
            "binding": "MAILER"
          }
        ],
        "consumers": [
          {
            "queue": "mailer",
            "max_batch_size": 100, // 100 messages per batch
            "max_batch_timeout": 5 // 5 seconds per batch
          }
        ]
      }
    }
  },
  "d1_databases": [
    {
      "binding": "arabia",
      "database_name": "arabia",
      "database_id": "b069ff1d-7a47-462e-b1e6-0164062d0748"
    }
  ],
  "kv_namespaces": [
    {
      "binding": "ARABIAN_KV",
      "id": "2dbc45eb4b0248a1a804a97d19b9f7c9"
    }
  ],
  "queues": {
    "producers": [
      {
        "queue": "mailer",
        "binding": "MAILER"
      }
    ],
    "consumers": [
      {
        "queue": "mailer",
        "max_batch_size": 100, // 100 messages per batch
        "max_batch_timeout": 5 // 5 seconds per batch
      }
    ]
  }
}
